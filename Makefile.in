# Makefile.

NEXUS_HOME = @prefix@/nexus
SHELL = '/bin/sh'

default: all

src:
	$(MAKE) -C src

install:
	if test ! -d $(NEXUS_HOME); \
		then mkdir $(NEXUS_HOME); \
	fi
	if test ! -d $(NEXUS_HOME); \
		then mkdir $(NEXUS_HOME); \
	fi
	install -m 755 src/nexus-master $(NEXUS_HOME)
	install -m 755 src/nexus-slave $(NEXUS_HOME)
	install -m 755 src/swig/java/libnexus.so $(NEXUS_HOME)
	rsync -avz src/webui $(NEXUS_HOME)
	if test ! -d $(NEXUS_HOME)/third_party; \
		then mkdir $(NEXUS_HOME)/third_party; \
	fi
	rsync -avz src/third_party/bottle-0.5.6 $(NEXUS_HOME)/third_party

uninstall:
	$(error unimplemented)

dist:
	$(error unimplemented)

all: src

doxygen:
	doxygen

etags:
	find src -name "*.cpp" -o -name "*.hpp" | grep -v "\~$$" | xargs etags -o src/TAGS

clean:
	$(MAKE) -C src clean

.PHONY: default src install uninstall dist all clean
